#!/usr/bin/env bash


echo "Compiling Receiver and Sender"
cargo build --manifest-path /home/shadow-starter/JHShadow/joao-hugo-exemplos/communicator/Cargo.toml



# first argument is the path to shadow
if [ "$#" -ge 1 ]; then
    echo "Prepending $1 to PATH"
    export PATH="$1:${PATH}"
fi

# Removing shadow.data
if [ -d "shadow.data" ]; then
  echo "  "
  printf '%s\n' "Removing directory shadow.data"
  rm -rf "shadow.data"
  echo "  "
fi

shadow shadow.yaml > jl.log

# Printing host files
echo;
for file in shadow.data/hosts/*/*.stdout;
  do 
    echo "##########################################"
    echo $file 
    echo;
    cat $file; 
    echo "##########################################"
    echo;
  done